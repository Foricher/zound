@(message: String)

@main("Welcome to Play 2.0") {

  <audio src="/stream.wav" preload autoplay controls></audio>

    <div id="controls">
        <button id="sound-start">Start</button>
        <button id="sound-stop">Stop</button>
    </div>

    <section id="channels">

      @Range(0, 3).map { i =>
        <div class="channel" id="channel@i">
          <div class="head">
            <h2>Chan @i</h2>
          </div>
            <div class="sound-onoff">
              <label>
                <input type="radio" name="ch0-on" value="sound-on" /> On
              </label>
              <label>
                <input type="radio" name="ch0-on" value="sound-off" /> Off
              </label>
            </div>
            <div>
              <label>
                <input type="radio" name="ch0-wave" value="wave-sine" /> Sine
              </label>
              <label>
                <input type="radio" name="ch0-wave" value="wave-sine" /> Saw
              </label>
                <br/>
              <label>
                <input type="radio" name="ch0-wave" value="wave-sine" /> Pulse
              </label>
              <label>
                <input type="radio" name="ch0-wave" value="wave-sine" /> Noise
              </label>
            </div>
            <div class="sound-freq">
              <label>
                <input type="radio" name="ch0-note" value="164.8" /> C-1
              </label>
              <label>
                <input type="radio" name="ch0-note" value="196.0" /> E-1
              </label>
                <br/>
              <label>
                <input type="radio" name="ch0-note" value="261.6" /> G-1
              </label>
              <label>
                <input type="radio" name="ch0-note" value="329.6" /> C-2
              </label>
                <br/>
              <label>
                <input type="radio" name="ch0-note" value="392.0" /> E-3
              </label>
              <label>
                <input type="radio" name="ch0-note" value="523.2" /> G-2
              </label>
            </div>
          </div>
          }

        <br style="clear:both" />
    </section>
    

    <script type="text/javascript" charset="utf-8">
        $("#sound-start").click(function(){
            $.get("/start");
        });
        $("#sound-stop").click(function(){
            $.get("/stop");
        });
    
        $(".sound-onoff input").click(function(e){
            var $this = $(this),
                chan = parseInt($this.parents("div.channel:first").attr("id").replace(/[^0-9]/g, ""), 10),
                onOff = $this.val().replace("sound-", "");
            console.log(onOff, chan)
            $.get("/osc/" + chan + "/" + onOff);
        });


        $(".sound-freq input").click(function(e){
            var $this = $(this),
                chan = parseInt($this.parents("div.channel:first").attr("id").replace(/[^0-9]/g, ""), 10),
                freq = $this.val();
            console.log(freq, chan)
            $.get("/osc/" + chan + "/freq/" + freq);
        })
    </script>
}
